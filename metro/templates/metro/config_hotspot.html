{% extends "metro/base.html" %}
{% load static %}

{% block title %}Hotspot Configuration{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'metro/css/config.css' %}">
{% endblock %}

{% block content %}
<div id="app">
    <!-- WiFi Hotspot Configuration Section -->
    <div id="hotspot-section" class="section">
        <h1>WiFi Hotspot Configuration</h1>

        <div id="hotspot-status-box" class="status-box">
            <div class="status-row">
                <span class="status-label">Current SSID:</span>
                <span id="hotspot-current-ssid" class="status-value">Not configured</span>
            </div>
            <div class="status-row">
                <span class="status-label">Connection:</span>
                <span id="hotspot-connection-status" class="status-value">Disconnected</span>
            </div>
        </div>

        <div id="hotspot-config-form">
            <div class="form-group">
                <button id="btn-scan-networks" class="btn btn-primary">Scan Networks</button>
            </div>

            <div id="network-scan-results" style="display: none;">
                <label for="network-select">Select Network:</label>
                <select id="network-select" class="select">
                    <option value="">-- Select Network --</option>
                </select>
            </div>

            <div class="form-group">
                <label for="manual-ssid-input">Or Enter SSID Manually:</label>
                <input type="text" id="manual-ssid-input" class="input" placeholder="Network name" />
            </div>

            <div class="form-group">
                <label for="hotspot-password-input">Password:</label>
                <input type="password" id="hotspot-password-input" class="input" placeholder="WiFi password" />
            </div>

            <div class="button-group">
                <button id="btn-save-hotspot" class="btn btn-success">Save Configuration</button>
                <button id="btn-connect-hotspot" class="btn btn-primary" style="display: none;">Connect Now</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module">
    import { HotspotConfig } from "{% static 'metro/js/hotspot-config.js' %}";

    document.addEventListener('DOMContentLoaded', async () => {
        const hotspotApp = new HotspotConfig();
        window.hotspotConfig = hotspotApp;
        await hotspotApp.init();
    });
</script>
{% endblock %}
